---
import BaseLayout from "./BaseLayout.astro"
import PhotoGallery from "../components/PhotoGallery.astro"
import PaginationNav from "../components/PaginationNav.astro"
import PhotoNavigation from "../components/PhotoNavigation.astro"
import type { PhotoManifestItem } from "../utils/photoManifestSchema"
import type { Page } from "astro"
import { getFontPreload } from "../config/fontPreload"

interface Props {
  page: Page<PhotoManifestItem>
  fullPhotoDataset: PhotoManifestItem[]
  pageTitle: string
  pageDescription: string
  currentNav?: "all" | "tags" | "dates" | "equipment"
}

const { page, fullPhotoDataset, pageTitle, pageDescription, currentNav } =
  Astro.props

const frontmatter = {
  title: pageTitle,
  description: pageDescription,
  pageType: "photo-gallery",
}
---

<BaseLayout
  frontmatter={frontmatter}
  fontPreload={getFontPreload({ heroSubtitle: true, photoGallery: true })}
>
  <slot name="heroContent" />

  <PhotoGallery photos={page.data} fullPhotoDataset={fullPhotoDataset} />

  <PaginationNav page={page} />

  <PhotoNavigation currentPage={currentNav} />
</BaseLayout>
