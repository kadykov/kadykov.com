---
import OptimizedImage from "./OptimizedImage.astro"

interface Props {
  src: string
  alt: string
  title?: string
}

const { src, alt, title } = Astro.props

// Check if it's an image that can be optimized (common image extensions)
const imageExtensions = [
  ".jpg",
  ".jpeg",
  ".png",
  ".webp",
  ".avif",
  ".gif",
  ".bmp",
  ".tiff",
]
const isOptimizableImage = imageExtensions.some((ext) =>
  src.toLowerCase().endsWith(ext)
)

// Images should be displayed edge-to-edge for maximum visual impact
// No width constraints - let OptimizedImage auto-generate optimal sizes
const IMAGE_DISPLAY_WIDTH = 1920 // High enough to generate good srcset options
---

{
  !isOptimizableImage ? (
    <img
      src={src}
      alt={alt}
      title={title}
      loading="lazy"
      decoding="async"
      style="display: block; width: 100%; height: auto; max-width: 100%;"
    />
  ) : (
    <OptimizedImage
      src={src}
      alt={alt}
      displayWidth={IMAGE_DISPLAY_WIDTH}
      loading="lazy"
      decoding="async"
    />
  )
}
