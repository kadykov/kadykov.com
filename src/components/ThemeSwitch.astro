---
import { Icon } from "astro-icon/components"
---

<label class="swap swap-rotate btn btn-ghost btn-circle">
  <!-- this hidden checkbox controls the state -->
  <input type="checkbox" data-toggle-theme="dark,light" id="theme-switch" />

  <!-- light icon -->
  <Icon name="ri:sun-line" class="swap-off h-8 w-8 sm:h-10 sm:w-10" />

  <!-- dark icon -->
  <Icon name="ri:moon-line" class="swap-on h-8 w-8 sm:h-10 sm:w-10" />
</label>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const theme = localStorage.getItem("theme") ?? "light"
    const themeSwitch = document.getElementById("theme-switch")
    if (theme === "dark" && themeSwitch) {
      ;(themeSwitch as HTMLInputElement).checked = true
    } else if (themeSwitch) {
      ;(themeSwitch as HTMLInputElement).checked = false
    }
  })

  import { themeChange } from "theme-change"
  themeChange()
</script>
