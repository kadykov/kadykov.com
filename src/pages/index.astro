---
import { getCollection } from "astro:content"
import BaseLayout from "../layouts/BaseLayout.astro"
import Hero from "../components/Hero.astro"
import OptimizedImage from "../components/OptimizedImage.astro"
import BlogPostListItem from "../components/BlogPostListItem.astro"
import { getFontPreload } from "../config/fontPreload"

const frontmatter = {
  title: "Aleksandr Kadykov",
  description:
    "Research engineer with expertise in THz spectroscopy and interests in photography and web technologies",
}

// Fetch the most recent published blog posts (up to 3)
const allPosts = (
  await getCollection("blog", ({ data }) => data.draft !== true)
).sort((a, b) => {
  const dateA = a.data.pubDate?.getTime() ?? 0
  const dateB = b.data.pubDate?.getTime() ?? 0
  return dateB - dateA // Most recent first
})

const recentPosts = allPosts.slice(0, 3) // Get up to 3 most recent posts
---

<BaseLayout
  frontmatter={frontmatter}
  fontPreload={getFontPreload({
    heroSubtitle: true,
    articleContent: true,
  })}
>
  <Hero>
    <h1>Aleksandr Kadykov</h1>
    <p>
      Research engineer exploring THz spectroscopy, photography, and modern web
      technologies
    </p>
  </Hero>

  <article>
    <h2>Welcome!</h2>
    <p>
      I'm a research engineer with a strong background in <a
        href="https://en.wikipedia.org/wiki/Terahertz_radiation">THz</a
      > spectroscopy, imaging, and high-precision measurement systems. Over the years,
      I've worked on projects that blend science and engineering—from photonics and
      magnetotransport to industrial applications of THz technologies. Currently,
      I'm exploring new opportunities in research and engineering roles.
    </p>

    <p>
      Beyond research, I'm passionate about photography and web development.
      This website is both a portfolio and a learning project where I can share
      my <a href="/photos">photography</a> and thoughts on <a href="/blog"
        >web design</a
      >, optimization, and visual storytelling. If you'd like to learn more
      about my background, check out my <a href="/about">about page</a>, view my
      CV in <a href="/cv">web</a> or <a
        href="https://github.com/kadykov/typstCV/releases/latest/download/kadykov-cv-en.pdf"
        >PDF</a
      > format, or <a href="/contact">get in touch</a>.
    </p>

    <p>
      Feel free to explore my photo galleries—browse by <a href="/photos/tags"
        >tag</a
      >, <a href="/photos/dates">date</a>, or if you're a photography equipment
      enthusiast, by <a href="/photos/equipment">camera and lens</a>.
    </p>

    <OptimizedImage
      src="https://share.kadykov.com/photos/2023/11/28/DSC_1244.avif"
      alt="Aleksandr Kadykov's self portrait."
      displayWidth={200}
    />
  </article>

  <ol>
    {recentPosts.map((post) => <BlogPostListItem post={post} />)}
  </ol>
</BaseLayout>
