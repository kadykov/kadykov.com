---
import { getCollection } from "astro:content"
import BaseLayout from "../../../layouts/BaseLayout.astro"
import Hero from "../../../components/Hero.astro"
import { slugify } from "../../../utils/slugify"

const allPosts = await getCollection("blog")
const tags = [...new Set(allPosts.map((post) => post.data.tags).flat())]

const frontmatter = {
  title: "Tag Index",
  description: "Browse all blog post tags",
}
---

<BaseLayout frontmatter={frontmatter}>
  <Hero>
    <h1>Blog Tags</h1>
    <p>Explore posts by tags</p>
  </Hero>

  <nav aria-label="Blog tags">
    <ul>
      {
        tags.map((tag) => (
          <li>
            <a href={`/blog/tags/${slugify(tag)}`}>#{tag}</a>
          </li>
        ))
      }
    </ul>
  </nav>
</BaseLayout>
