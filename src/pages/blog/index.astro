---
import { getCollection } from "astro:content"
import BaseLayout from "../../layouts/BaseLayout.astro"
import Hero from "../../components/Hero.astro"
import BlogPostListItem from "../../components/BlogPostListItem.astro"

const allPosts = (await getCollection("blog")).sort((a, b) => {
  const dateA = a.data.pubDate?.getTime() ?? 0
  const dateB = b.data.pubDate?.getTime() ?? 0
  return dateB - dateA // Most recent first
})

const frontmatter = {
  title: "Blog",
  description: "Blog posts about web development, photography, and research",
}
---

<BaseLayout frontmatter={frontmatter}>
  <Hero>
    <h1>Blog Posts</h1>
    <p>Only a few posts for now, but more content is on the way!</p>
  </Hero>

  <ol>
    {allPosts.map((post) => <BlogPostListItem post={post} />)}
  </ol>

  <nav>
    <ul>
      <li>
        <a href="/blog/tags">Browse all tags</a>
      </li>
      <li>
        <a href="/blog/rss.xml" target="_blank" rel="noopener noreferrer">
          RSS Feed
        </a>
      </li>
    </ul>
  </nav>
</BaseLayout>
