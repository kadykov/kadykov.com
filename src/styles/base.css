@import url("modern-normalize/modern-normalize.css");

/*
 * Modern CSS Design System with Advanced Features
 * 
 * BROWSER COMPATIBILITY REQUIREMENTS:
 * ====================================
 * This stylesheet uses cutting-edge CSS features with two levels of support:
 * 
 * TIER 1 - MINIMUM USABLE (Basic Functionality)
 * ----------------------------------------------
 * Site is usable with complete color system and layout, but missing some
 * interactive enhancements and polish.
 * 
 * The ONLY meaningful barrier for modern browsers is OKLCH color space support:
 * 
 * - Safari: 15.4+ (March 2022)
 * - Chrome/Edge: 111+ (March 2023)
 * - Firefox: 113+ (May 2023)
 * 
 * Missing features at Tier 1:
 * - Form validation only shows on parent labels when :has() is unsupported
 * - Validation errors may appear before user interaction if :user-invalid unsupported
 * - View transitions are instant instead of animated (Chrome-only feature)
 * 
 * TIER 2 - FULL EXPERIENCE (All Features)
 * ----------------------------------------
 * Complete experience with all interactive enhancements and optimal UX:
 * 
 * - Chrome/Edge: 119+ (October 2023)
 * - Firefox: 121+ (December 2023)
 * - Safari: 16.5+ (May 2023)
 * 
 * Note: View transitions (@view-transition) are Chrome-only and experimental.
 * Other browsers gracefully degrade to instant transitions.
 * 
 * CRITICAL FEATURE (Required for Tier 1):
 * ========================================
 * 
 * OKLCH Color Space (oklch() function)
 * ------------------------------------
 * The entire design system is built on OKLCH color space for perceptually
 * uniform color manipulation. This is the ONLY feature that represents a
 * meaningful compatibility barrier for modern browsers.
 * 
 * - Safari: 15.4+ (March 2022)
 * - Chrome/Edge: 111+ (March 2023)
 * - Firefox: 113+ (May 2023)
 * 
 * WITHOUT OKLCH: All color declarations become invalid, causing the entire
 * color system to collapse to black/white browser defaults.
 * 
 * Other CSS Features Used:
 * ------------------------
 * The stylesheet also uses modern CSS features like clamp(), min(), calc(),
 * CSS Grid, Flexbox, CSS custom properties, and mathematical step functions
 * (using large multipliers instead of infinity keyword). However, these are
 * universally supported across all browsers that support OKLCH, making them
 * non-issues for compatibility. Even older browsers (2015-2020 era) support
 * these features, but lack OKLCH support.
 * 
 * ENHANCEMENT FEATURES (Tier 2 improvements):
 * ============================================
 * Without these, the site remains fully usable with minor UX degradation:
 * 
 * 1. Parent Selector (:has() pseudo-class)
 *    - Form validation styling for parent labels based on child input state
 *    - WITHOUT: Validation styling only appears on input/textarea, not label
 *    - Safari 15.4+, Chrome 105+, Firefox 121+
 * 
 * 2. User Interaction Pseudo-classes (:user-invalid)
 *    - Shows validation errors only after user interaction
 *    - WITHOUT: Validation errors appear immediately on page load (annoying but functional)
 *    - Safari 16.5+, Chrome 119+, Firefox 88+
 * 
 * 3. Focus Visibility (:focus-visible)
 *    - Smart focus rings only for keyboard navigation
 *    - WITHOUT: Focus rings appear on mouse clicks too (more visual noise)
 *    - Safari 15.4+, Chrome 86+, Firefox 85+
 * 
 * 4. View Transitions API (@view-transition)
 *    - Smooth page navigation animations (experimental)
 *    - WITHOUT: Page transitions are instant instead of animated
 *    - Chrome 111+ only (gracefully degrades in other browsers)
 * 
 * 5. User Preference Media Queries
 *    - prefers-color-scheme (automatic dark mode)
 *    - prefers-reduced-motion (accessibility for motion sensitivity)
 *    - WITHOUT: No automatic dark mode, animations play for all users
 *    - Safari 12.1+/10.1+, Chrome 76+/74+, Firefox 67+/63+
 * 
 * 6. Variable Fonts (wght axis, woff2-variations)
 *    - Dynamic font weight adjustment for fine typography control
 *    - WITHOUT: Falls back to system fonts (arial, georgia, monospace)
 *    - Safari 11+, Chrome 62+, Firefox 62+
 * 
 * DESIGN PHILOSOPHY:
 * ==================
 * This stylesheet implements a mathematical color system where only base OKLCH
 * values need to be defined. All surface variations, text colors, shadows, and
 * interactive states are automatically derived using perceptually uniform
 * calculations. This ensures consistent contrast ratios and visual hierarchy
 * across light and dark themes.
 * 
 * No fallbacks are provided for older browsers. Sites using this stylesheet
 * should detect browser capabilities and show an upgrade notice if needed.
 * 
 * STYLING APPROACH:
 * =================
 * Semantic HTML with element-based styling minimizes the need for classes:
 * 
 * 1. IDs for Unique Structural Elements
 *    - Used when an element appears once per page (#navbar, #hero, #footer)
 *    - Benefits: Semantic uniqueness, anchor links, JavaScript targeting
 *    - Replaces fragile structural selectors (body > footer, main > header)
 * 
 * 2. Contextual Element Styling
 *    - Elements styled differently based on container (article h2, nav ul)
 *    - article: Optimized for long-form reading with enhanced typography
 *    - nav ul: Horizontal flex layout for navigation lists and tags
 *    - Semantic HTML reduces class usage since elements convey meaning
 * 
 * 3. Classes for Specific Purposes
 *    - Layout requirements (PhotoGallery grid positioning)
 *    - External library integration (PhotoSwipe, Natural Sticky state classes)
 *    - Optional styling overrides (className pass-through props)
 * 
 * This approach prioritizes semantic HTML and contextual styling while using
 * IDs and classes purposefully rather than avoiding them dogmatically.
 */

/*
 * OKLCH-Based Calculated Color System
 * 
 * This system uses OKLCH color space for perceptually accurate contrast calculations
 * and automatic color derivation. Only base OKLCH values need to be defined - all
 * surface variations, text colors, and interactive states are mathematically derived.
 */
:root {
  --font-sans: "Source Sans 3 Variable", arial, sans-serif;
  --font-serif: "Bitter Variable", georgia, serif;
  --font-mono: "Source Code Pro Variable", "Courier New", monospace;

  /* Typography scale - H4 level used across multiple elements */
  --font-size-h4: 1.3rem;
  --font-weight-h4: 420;

  /*
   * Base OKLCH Color Values
   * OKLCH: L (lightness 0-1), C (chroma 0-0.4+), H (hue 0-360°)
   * 
   * These are the only values that need to be manually defined.
   * All other colors are mathematically derived to ensure:
   * - Perceptually uniform contrast ratios
   * - Gamut-safe color calculations
   * - Consistent visual hierarchy across themes
   */

  /* Active palette - keep others commented for future testing */

  /* --surface-l: 0.99;
  --surface-c: 0.005;
  --surface-h: 80;
  --primary-l: 0.55;
  --primary-c: 0.12;
  --primary-h: 254;
  --accent-l: 0.72;
  --accent-c: 0.18;
  --accent-h: 44; */

  /* Theme Colors */
  --surface-l: 0.99;
  --surface-c: 0.004;
  --surface-h: 72;
  --primary-l: 0.56;
  --primary-c: 0.105;
  --primary-h: 240;
  --accent-l: 0.81;
  --accent-c: 0.155;
  --accent-h: 72;

  /* Calculated Surface Colors using OKLCH */

  /*
   * Surface Hierarchy System with Directional Stepping
   * 
   * The surface-sign calculation determines stepping direction based on lightness:
   * - Light themes (surface-l > 0.5): containers get progressively darker
   * - Dark themes (surface-l < 0.5): containers get progressively lighter
   * 
   * This creates consistent visual hierarchy where containers are always
   * distinguishable from the base surface, regardless of theme.
   * 
   * The large multiplier (999999) creates a step function:
   * - Returns -1 for light surfaces (step darker)
   * - Returns +1 for dark surfaces (step lighter)
   * - Threshold at 0.57 accounts for perceptual lightness differences
   * 
   * Note: Using 999999 instead of infinity improves browser compatibility
   * while achieving the same mathematical result (values clamp to ±1).
   */

  /* Surface color lightness sign: determines stepping direction */
  --surface-sign: clamp(-1, (0.57 - var(--surface-l)) * 999999, 1);

  /* OKLCH-based surface colors */
  --color-surface: oklch(var(--surface-l) var(--surface-c) var(--surface-h));
  --color-surface-container-lowest: oklch(
    calc(var(--surface-l) + 0.015 * var(--surface-sign)) var(--surface-c)
      var(--surface-h)
  );
  --color-surface-container-low: oklch(
    calc(var(--surface-l) + 0.03 * var(--surface-sign)) var(--surface-c)
      var(--surface-h)
  );
  --color-surface-container: oklch(
    calc(var(--surface-l) + 0.045 * var(--surface-sign)) var(--surface-c)
      var(--surface-h)
  );
  --color-surface-container-high: oklch(
    calc(var(--surface-l) + 0.06 * var(--surface-sign)) var(--surface-c)
      var(--surface-h)
  );
  --color-surface-container-highest: oklch(
    calc(var(--surface-l) + 0.075 * var(--surface-sign)) var(--surface-c)
      var(--surface-h)
  );

  /* Calculated Text Colors using OKLCH */

  /*
   * Automatic Text Color Generation with Proportional Desaturation
   * 
   * Text colors are calculated to ensure sufficient contrast while preventing
   * gamut clipping through proportional chroma scaling:
   * 
   * 1. Lightness: Stepped away from surface using surface-sign direction
   * 2. Chroma: Proportionally scaled based on lightness change direction
   * 3. Hue: Inherited from surface to maintain color relationship
   * 
   * The min() function calculates the correct chroma scaling ratio by comparing
   * two possible lightness relationships:
   * - Brightening ratio: new_lightness / base_lightness
   * - Darkening ratio: (1 - new_lightness) / (1 - base_lightness)
   * 
   * One ratio will be >1 (incorrect direction), the other <1 (correct direction).
   * min() automatically selects the correct scaling ratio regardless of whether
   * we brightened or darkened the base color.
   * 
   * Text Contrast Hierarchy:
   * - High contrast (85% step): Hyperlinks and emphasized content
   * - Regular contrast (60% step): General text and main content
   * - Medium contrast (50% step): Secondary text and descriptions
   * - Low contrast (40% step): Subdued text and less important content
   */

  /* High-contrast text: 85% lightness step from surface - for hyperlinks */
  --on-surface-high-l: clamp(
    0,
    var(--surface-l) + 0.85 * var(--surface-sign),
    1
  );

  /* On-surface-high: High contrast text with proportional desaturation */
  --color-on-surface-high: oklch(
    var(--on-surface-high-l)
      calc(
        var(--surface-c) *
          min(
            var(--on-surface-high-l) / var(--surface-l),
            (1 - var(--on-surface-high-l)) / (1 - var(--surface-l))
          )
      )
      var(--surface-h)
  );

  /* Regular-contrast text: 60% lightness step from surface - for general content */
  --on-surface-l: clamp(0, var(--surface-l) + 0.6 * var(--surface-sign), 1);

  /* On-surface: Regular contrast text with proportional desaturation */
  --color-on-surface: oklch(
    var(--on-surface-l)
      calc(
        var(--surface-c) *
          min(
            var(--on-surface-l) / var(--surface-l),
            (1 - var(--on-surface-l)) / (1 - var(--surface-l))
          )
      )
      var(--surface-h)
  );

  /* Medium-contrast text: 50% lightness step from surface - for secondary content */
  --on-surface-variant-l: clamp(
    0,
    var(--surface-l) + 0.5 * var(--surface-sign),
    1
  );

  /* On-surface-variant: Medium contrast text with proportional desaturation */
  --color-on-surface-variant: oklch(
    var(--on-surface-variant-l)
      calc(
        var(--surface-c) *
          min(
            var(--on-surface-variant-l) / var(--surface-l),
            (1 - var(--on-surface-variant-l)) / (1 - var(--surface-l))
          )
      )
      var(--surface-h)
  );

  /* Low-contrast text: 40% lightness step from surface - for subdued content */
  --on-surface-low-l: clamp(0, var(--surface-l) + 0.4 * var(--surface-sign), 1);

  /* On-surface-low: Low contrast text with proportional desaturation */
  --color-on-surface-low: oklch(
    var(--on-surface-low-l)
      calc(
        var(--surface-c) *
          min(
            var(--on-surface-low-l) / var(--surface-l),
            (1 - var(--on-surface-low-l)) / (1 - var(--surface-l))
          )
      )
      var(--surface-h)
  );

  /* Calculated Primary Colors */

  /*
   * Primary Color System with Gamut-Safe Calculations
   * 
   * The primary color system uses the same proportional desaturation technique
   * as text colors to ensure all derived colors stay within the OKLCH gamut:
   * 
   * 1. Base primary: Uses defined OKLCH values directly
   * 2. Container colors: Averaged lightness between primary and surface
   * 3. Text colors: Calculated with sufficient contrast steps
   * 4. Chroma scaling: Prevents gamut overflow through proportional reduction
   * 
   * This ensures consistent color relationships and prevents browser
   * from clipping colors to sRGB boundaries.
   */

  /* Base primary color using defined OKLCH values */
  --color-primary: oklch(var(--primary-l) var(--primary-c) var(--primary-h));

  /* Gradient background for primary color */

  /*
   * Three-point gradient for base primary color.
   * Uses smaller hue shifts (±10°) than container due to higher chroma.
   */
  --bg-primary: linear-gradient(
    135deg,
    oklch(var(--primary-l) var(--primary-c) calc(var(--primary-h) - 10)),
    var(--color-primary),
    oklch(var(--primary-l) var(--primary-c) calc(var(--primary-h) + 10))
  );

  /* Text on primary: High contrast with gamut-safe chroma */
  --on-primary-l: clamp(
    0,
    var(--primary-l) + 0.55 * clamp(-1, (0.57 - var(--primary-l)) * 999999, 1),
    1
  );
  --color-on-primary: oklch(
    var(--on-primary-l)
      calc(
        var(--primary-c) *
          min(
            var(--on-primary-l) / var(--primary-l),
            (1 - var(--on-primary-l)) / (1 - var(--primary-l))
          )
      )
      var(--primary-h)
  );

  /* Container Strategy: Surface-Weighted Mixing for Practical Integration */

  /* 
   * Primary container lightness uses weighted mixing (85% surface, 15% primary).
   * This heavily favors surface lightness to create containers that:
   * - Stay close to surface lightness for seamless layout integration
   * - Work well alongside surface-container hierarchy colors
   * - Provide subtle color accent without dramatic lightness shifts
   * - Remain practical in both light and dark themes
   */
  --primary-container-l: calc(
    var(--surface-l) * 0.85 + var(--primary-l) * 0.15
  );

  /* Primary container chroma: proportionally scaled to prevent gamut clipping */
  --primary-container-c: calc(
    var(--primary-c) *
      min(
        var(--primary-container-l) / var(--primary-l),
        (1 - var(--primary-container-l)) / (1 - var(--primary-l))
      )
  );
  --color-primary-container: oklch(
    var(--primary-container-l) var(--primary-container-c) var(--primary-h)
  );

  /* Text on primary container: High contrast with directional stepping */
  --on-primary-container-l: clamp(
    0,
    var(--primary-container-l) + 0.55 *
      clamp(-1, (0.57 - var(--primary-container-l)) * 999999, 1),
    1
  );
  --color-on-primary-container: oklch(
    var(--on-primary-container-l)
      calc(
        var(--primary-c) *
          min(
            var(--on-primary-container-l) / var(--primary-l),
            (1 - var(--on-primary-container-l)) / (1 - var(--primary-l))
          )
      )
      var(--primary-h)
  );

  /* Gradient background for primary container */

  /*
   * Three-Point Hue-Based Gradient for Low-Chroma Container Colors
   * 
   * Uses a three-color gradient with the exact container color in the middle:
   * - Start: Hue shifted -20° from container base
   * - Middle: Exact container color (maintains color accuracy at center)
   * - End: Hue shifted +20° from container base
   * 
   * This creates smoother transitions and ensures the "true" container color
   * is visible in the center of the gradient, making it more versatile for
   * overlapping elements (like navbar + hero blending).
   * 
   * Safe because:
   * - Container has lower chroma than base primary (85% surface mixing)
   * - Hue shifts at low chroma stay well within P3/sRGB gamut
   * - Maintains all contrast requirements for overlaid text
   */
  --bg-primary-container: linear-gradient(
    135deg,
    oklch(
      var(--primary-container-l) var(--primary-container-c)
        calc(var(--primary-h) - 20)
    ),
    var(--color-primary-container),
    oklch(
      var(--primary-container-l) var(--primary-container-c)
        calc(var(--primary-h) + 20)
    )
  );

  /* Calculated Accent Colors */

  /*
   * Accent Color System - Mirror of Primary System
   * 
   * Uses identical calculation logic as primary colors to ensure:
   * - Consistent contrast behavior across color roles
   * - Predictable visual hierarchy
   * - Gamut-safe color derivation
   * 
   * Accent colors typically have higher chroma for visual interest
   * while maintaining the same mathematical relationships.
   */

  /* Base accent color using defined OKLCH values */
  --color-accent: oklch(var(--accent-l) var(--accent-c) var(--accent-h));

  /* Gradient background for accent color */

  /*
   * Three-point gradient for base accent color.
   * Uses smaller hue shifts (±10°) than container due to higher chroma.
   */
  --bg-accent: linear-gradient(
    135deg,
    oklch(var(--accent-l) var(--accent-c) calc(var(--accent-h) - 10)),
    var(--color-accent),
    oklch(var(--accent-l) var(--accent-c) calc(var(--accent-h) + 10))
  );

  /* Text on accent: High contrast with gamut-safe chroma */
  --on-accent-l: clamp(
    0,
    var(--accent-l) + 0.55 * clamp(-1, (0.57 - var(--accent-l)) * 999999, 1),
    1
  );
  --color-on-accent: oklch(
    var(--on-accent-l)
      calc(
        var(--accent-c) *
          min(
            var(--on-accent-l) / var(--accent-l),
            (1 - var(--on-accent-l)) / (1 - var(--accent-l))
          )
      )
      var(--accent-h)
  );

  /* 
   * Accent container uses the different weighted mixing strategy as primary container
   * (75% surface, 25% accent) for more prominent color presence.
   */
  --accent-container-l: calc(var(--surface-l) * 0.75 + var(--accent-l) * 0.25);

  /* Accent container chroma: proportionally scaled to prevent gamut clipping */
  --accent-container-c: calc(
    var(--accent-c) *
      min(
        var(--accent-container-l) / var(--accent-l),
        (1 - var(--accent-container-l)) / (1 - var(--accent-l))
      )
  );
  --color-accent-container: oklch(
    var(--accent-container-l) var(--accent-container-c) var(--accent-h)
  );

  /* Text on accent container: High contrast with directional stepping */
  --on-accent-container-l: clamp(
    0,
    var(--accent-container-l) + 0.55 *
      clamp(-1, (0.57 - var(--accent-container-l)) * 999999, 1),
    1
  );
  --color-on-accent-container: oklch(
    var(--on-accent-container-l)
      calc(
        var(--accent-c) *
          min(
            var(--on-accent-container-l) / var(--accent-l),
            (1 - var(--on-accent-container-l)) / (1 - var(--accent-l))
          )
      )
      var(--accent-h)
  );

  /* Gradient background for accent container */

  /*
   * Three-point gradient matching primary container strategy.
   * 
   * The middle color stop ensures the "true" accent container color is
   * present in the gradient center, improving color accuracy and making
   * the gradient more versatile for different use cases.
   */
  --bg-accent-container: linear-gradient(
    135deg,
    oklch(
      var(--accent-container-l) var(--accent-container-c)
        calc(var(--accent-h) - 15)
    ),
    var(--color-accent-container),
    oklch(
      var(--accent-container-l) var(--accent-container-c)
        calc(var(--accent-h) + 15)
    )
  );

  /* Calculated Shadow Properties using OKLCH */

  /*
   * Adaptive Shadow System
   * 
   * Shadows are calculated to work across both light and dark themes:
   * 
   * 1. Shadow lightness: Always darker than surface (max 0.5 reduction)
   *    - Light themes: shadows are much darker than surface
   *    - Dark themes: shadows are slightly darker than surface
   * 
   * 2. Alpha values: Consistent across themes for predictable depth
   * 
   * 3. OKLCH color space: Ensures shadows don't shift hue unexpectedly
   *    compared to RGB-based shadow calculations
   */

  /* Shadow color: always darker than surface, theme-adaptive */
  --shadow-lightness: calc(max(0, var(--surface-l) - 0.5));

  /* Graduated alpha values for elevation hierarchy */
  --shadow-alpha-1: 0.15;
  --shadow-alpha-2: 0.12;
  --shadow-alpha-3: 0.1;
  --shadow-alpha-4: 0.08;
  --shadow-alpha-5: 0.06;

  /* Material Design Elevation Shadows with OKLCH Color Space */

  /*
   * Unified Shadow System - Compatible with Both Box Shadow and Text Shadow
   * 
   * These elevation variables use the three-value syntax (offset-x offset-y blur-radius color)
   * which is compatible with both box-shadow and text-shadow properties:
   * 
   * - For box-shadow: The spread-radius is omitted (equivalent to 0, no visual change)
   * - For text-shadow: Uses the exact same three-value syntax
   * 
   * This creates a single source of truth for elevation hierarchy across the design system,
   * eliminating code duplication and ensuring perfect consistency between box and text shadows.
   * 
   * Each elevation level uses Material Design's double-shadow technique:
   * 1. Ambient shadow: Larger, more diffuse (simulates ambient light)
   * 2. Key shadow: Smaller, sharper (simulates direct light source)
   */
  --elevation-0: none;
  --elevation-1:
    0 1px 3px oklch(var(--shadow-lightness) 0 0deg / var(--shadow-alpha-1)),
    0 1px 2px oklch(var(--shadow-lightness) 0 0deg / var(--shadow-alpha-2));
  --elevation-2:
    0 3px 6px oklch(var(--shadow-lightness) 0 0deg / var(--shadow-alpha-1)),
    0 2px 4px oklch(var(--shadow-lightness) 0 0deg / var(--shadow-alpha-2));
  --elevation-3:
    0 10px 20px oklch(var(--shadow-lightness) 0 0deg / var(--shadow-alpha-1)),
    0 6px 6px oklch(var(--shadow-lightness) 0 0deg / var(--shadow-alpha-3));
  --elevation-4:
    0 14px 28px oklch(var(--shadow-lightness) 0 0deg / var(--shadow-alpha-1)),
    0 10px 10px oklch(var(--shadow-lightness) 0 0deg / var(--shadow-alpha-3));
  --elevation-5:
    0 19px 38px oklch(var(--shadow-lightness) 0 0deg / var(--shadow-alpha-1)),
    0 15px 12px oklch(var(--shadow-lightness) 0 0deg / var(--shadow-alpha-4));

  /* Adaptive Spacing - Scales from mobile to desktop */

  /*
   * Responsive spacing that adapts to container width, similar to article padding.
   * Used for gaps, padding, and margins in card layouts where fixed spacing
   * would consume too much horizontal space on mobile screens.
   * 
   * - Mobile (narrow): 1rem (tight spacing)
   * - Desktop (wide): 3rem (generous spacing)
   * - Smooth transition based on container width
   */
  --spacing-adaptive: clamp(1rem, 6vw - 1rem, 3rem);

  /* Fibonacci Pattern Background - Reusable Variables */

  /*
   * SVG-based texture pattern using Fibonacci-inspired square tilings.
   * These patterns create subtle, organic texture reminiscent of paper grain.
   * 
   * Can be applied to any element and controlled via:
   * - background-image: var(--bg-pattern)
   * - background-size: var(--bg-pattern-size)
   * - background-repeat: repeat
   * - mask-image: for opacity control and gradient fading
   */
  --bg-pattern:
    /* To make the patterns more interesting, we can alternate between direct and inverted versions */
    /* 13x8 pattern */
    /* Inverted version */
    /* url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13 8"><path fill="rgba(119,119,119,.04)" d="M0 2h3V0H0Zm0 6h3V3H0zm13-5H5v5h8z"/></svg>'), */
    /* 21x13 pattern */
    /* url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21 13"><path fill="rgba(119,119,119,.04)" d="M5 0v3h1V0zm0 5V3H0v2zm3 8V5H5v8zM21 0H8v5h13z"/></svg>'), */
    /* Inverted version */
    /* url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21 13"><path fill="rgba(119,119,119,.04)" d="M6 0v3h2V0zM0 0v3h5V0zm5 13V5H0v8zm16-8H8v8h13z"/></svg>'); */
    /* 34x21 pattern */
    /* url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 34 21"><path fill="rgba(119,119,119,.04)" d="M26 21v-5h-2v5zm8-8h-8v3h8zM21 0v13h5V0zM0 13v8h21v-5h3v-1h-3v-2z"/></svg>'); */
    /* Inverted version */
    /* url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 34 21"><path fill="rgba(119,119,119,.04)" d="M21 15h3v-2h-3zm0 6h3v-5h-3zm13-5h-8v5h8zM26 0v13h8V0zM0 13h21V0H0z"/></svg>'); */

    /* url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13 8"><path fill="rgba(119,119,119,.04)" d="M10 8V6H9v2zm3-3h-3v1h3zm-3-5H8v5H0v3h8V6h1V5h1z"/></svg>'), */
    /* url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21 13"><path fill="rgba(119,119,119,.04)" d="M0 3v2h5v8h3V5H6V4H5V3zm8-3v3H6v1h2v1h13V0zM5 0v3h1V0z"/></svg>'); */
    /* url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 34 21"><path fill="rgba(119,119,119,.04)" d="M24 21h2v-5h8v-3h-8v2h-1v1h-1zm-3-8h3v2h1v-2h1V0h-5zM0 21h21v-5h3v-1h-3v-2H0z"/></svg>'); */

    /* url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 34 21"><path fill="rgba(119,119,119,.04)" d="M26 21v-5h-2v5zm8-8h-8v3h8zM21 0v13h5V0Zm0 21v-8H0v8z"/></svg>'), */
    /* url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 55 34"><path fill="rgba(119,119,119,.04)" d="M55 21v13H21v-8h-5v-2h5v-3zM13 34v-8h3v8zM0 21h13v5H0zM21 0v21h-8V0Z"/></svg>'); */

    /* 
     * Matrix patterns
     *
     * They are obtained by doubling the size of the Fibonacci squares, or "golden ratio" rectangles,
     * and arranging four copies in a 2x2 grid, then flipping
     * the top-right and bottom-left copies horizontally and vertically respectively.
     *
     * 26x16 pattern
     *
     * Matrix patterns made of squares
     * With minimal size 2
     */
    /* url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 16"><path fill="rgba(119,119,119,.04)" d="M26 0v3h-3V0zM3 13v3H0v-3zM21 0v8h-3v2h-2V8h-3V5H8V0h5zM5 16V8h3V6h2v2h3v3h5v5h-5z"/></svg>'), */
    /* With minimal size 1 */
    /* url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 16"><path fill="rgba(119,119,119,.04)" d="M26 0v3h-3V0zm-5 0v2h1v1h-1v5h-3v2h-1v1h1v5H5v-2H4v-1h1V8h3V6h1V5H8V0h5zm-8 5h-3v3h3v3h3V8h-3zM3 13v3H0v-3z"/></svg>'), */

    /* 
     * Matrix patterns made of "golden ratio" rectangles
     * With minimal size 5x2
     */
    url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 16"><path fill="rgba(119,119,119,.04)" d="M10 0v5h3V3h8V0zM0 0v5h8V0zm3 8v5h2V8zm10 3v2H5v3h11v-5zm8-8v5h2V3zm-3 8v5h8v-5z"/></svg>'),
    /* With minimal size 3x2 */
    /* url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 16"><path fill="rgba(119,119,119,.04)" d="M10 6v2h3V6zm0-6v5h3V3h8V0zM0 0v5h8V0zm3 8v5h2V8zm10 3v2H5v3h11v-5zm8-8v5h2V3zm-8 5v2h3V8zm5 3v5h8v-5z"/></svg>'), */
    /* With minimal size 3x1 */
    /* url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 16"><path fill="rgba(119,119,119,.04)" d="M10 6v2h3V6zm0-6v5h3V3h8V0zM0 0v5h8V0zm3 13H0v1h3zm0-5v5h2V8zm20-5h3V2h-3Zm-2 0v5h2V3zm-8 5v2h3V8zm0 3v2H5v3h11v-5zm5 0v5h8v-5z"/></svg>'), */
    /* With minimal size 2x1 */
    /* url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 16"><path fill="rgba(119,119,119,.04)" d="M10 6v2h3V6zM8 6v2h1V6zM0 0v5h8V0zm23 2V0h-1v2zm0 1h3V2h-3zm-2 0v5h2V3zM10 0v5h3V3h8V0h-8zm8 11v5h8v-5zm-1-3v2h1V8zm-4 0v2h3V8zM3 14v2h1v-2zm0-1H0v1h3zm0-5v5h2V8zm10 3v2H5v3h11v-5z"/></svg>'), */
    /* With minimal size 1x1 */
    /* url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 16"><path fill="rgba(119,119,119,.04)" d="M4 14H3v2h1zm-1 0v-1H0v1zm15-3v5h8v-5zm-2-1v1h1v-1zm1 0h1V8h-1zm-4-2v2h3V8zm-3-2v2h3V6zm0-1H9v1h1zM9 6H8v2h1zM3 8v5h1v1h1v2h11v-5h-3v2H5V8zm20-6v1h3V2zm-1 0h1V0h-1zM10 0v5h3V3h8v5h2V3h-1V2h-1V0zM0 0v5h8V0z"/></svg>'), */
    /*
     * 42x26 pattern
     * Matrix patterns made of Fibonacci squares
     *
     * With minimal size 2
     */
    /* url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 42 26"><path fill="rgba(119,119,119,.04)" d="M0 0v5h5V0zm37 21v5h5v-5zM8 0v3H6v2h2v8h5v3h3v-3h5V8h8V0zm26 26v-3h2v-2h-2v-8h-5v-3h-3v3h-5v5h-8v8z"/></svg>'); */
    /* With minimal size 1 */
    /* url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 42 26"><path fill="rgba(119,119,119,.04)" d="M26 10v3h-5v5h-5v-1h-1v1h-2v8h21v-3h3v3h5v-5h-5v1h-1v-1h-2v-8h-5v-3zM8 0v3H5V0H0v5h5V4h1v1h2v8h5v3h3v-3h5V8h5v1h1V8h2V0z"/></svg>'); */
    /*
     * Matrix patterns made of "golden ratio" rectangles
     * With minimal size 5x2
     */
    url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 42 26"><path fill="rgba(119,119,119,.04)" d="M37 21v2h5v-2zm-3-8v8h3v-8zM29 0v8h13V0zm-8 10v3h5v-3zm0 3h-5v3h5zM5 3H0v2h5zm0 2v8h3V5zM0 18v8h13v-8zm16 0v8h18v-5H21v-3zM8 0v5h13v3h5V0z"/></svg>');

  /* With minimal size 3x2 */

  /* url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 42 26"><path fill="rgba(119,119,119,.04)" d="M37 21v2h5v-2zm-3-8v8h3v-8zM29 0v8h13V0zm-2 10v3h2v-3zm-6 0v3h5v-3zm0 3h-5v3h5zm-8 0v3h2v-3zM5 3H0v2h5zm0 2v8h3V5zM0 18v8h13v-8zm16 0v8h18v-5H21v-3zM8 0v5h13v3h5V0z"/></svg>'); */

  /* With minimal size 3x1 */

  /* url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 42 26"><path fill="rgba(119,119,119,.04)" d="M5 0v3h1V0zm0 3H0v2h5zm0 2v8h3V5zm3-5v5h13v3h5V0h-5zm5 13v3h2v-3zm8 0h-5v3h5zm-5 5v8h18v-5H21v-3zM0 18v8h13v-8zm37 5h-1v3h1zm0-2v2h5v-2zm-3-8v8h3v-8zm-7-3v3h2v-3zm-6 0v3h5v-3zm8-10v8h13V0z"/></svg>'); */

  /* With minimal size 2x1 */

  /* url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 42 26"><path fill="rgba(119,119,119,.04)" d="M34 13v8h3v-8zm3 8v2h5v-2zm0 2h-1v3h1zm-24-5H0v8h13zm0-1v1h2v-1zm0-4v3h2v-3zm8 0h-5v3h5zm0-3v3h5v-3zm6 0v3h2v-3zm2-2h-2v1h2zm0-8v8h13V0zM8 5H5v8h3zM5 5V3H0v2zm0-5v3h1V0zm11 18v8h18v-3h2v-1h-2v-1H21v-3zM8 0v3H6v1h2v1h13v3h5V0h-5z"/></svg>'); */

  /* With minimal size 1x1 */

  /* url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 42 26"><path fill="rgba(119,119,119,.04)" d="M27 9h-1v1h1zm2-1h-2v1h2zm-2 2v3h2v-3zm-1 0h-5v3h5zm3-10v8h13V0zM6 4H5V3H0v2h5v8h3V5H6zm2-4v3H6v1h2v1h13v3h5V0zM5 0v3h1V0zm11 16h-1v1h1zm-1 1h-2v1h2zm0-1v-3h-2v3zm6-3h-5v3h5zm-5 5v8h18v-3h2v-1h-2v-1H21v-3zm-3 0H0v8h13zm21-5v8h2v1h1v1h5v-2h-5v-8zm3 10h-1v3h1z"/></svg>'); */

  /* Old versions for reference */

  /* url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13 21"><path fill="rgba(119,119,119,.04)" d="M0 0h3v5H0zm4 0h1v5H4zM3 5h1v1H3zm2 0h8v1H5zM0 6h3v2H0zm4 0h1v2H4zM3 8h1v13H3zm2 0h8v13H5z"/></svg>'), */

  /* url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13 21"><path fill="rgba(119,119,119,.04)" d="M3 0h1v5H3zm2 0h8v5H5zM0 5h3v1H0zm4 0h1v1H4zM3 6h1v2H3zm2 0h8v2H5zM0 8h3v13H0zm4 0h1v13H4z"/></svg>'), */

  /* url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21 34"><path fill="rgba(119,119,119,.04)" d="M0 0h5v8H0zm6 0h2v8H6zM5 8h1v2H5zm3 0h13v2H8zm-8 2h5v3H0zm6 0h2v3H6zm-1 3h1v21H5zm3 0h13v21H8z"/></svg>'), */

  /* url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21 34"><path fill="rgba(119,119,119,.04)" d="M5 0h1v8H5zm3 0h13v8H8zM0 8h5v2H0zm6 0h2v2H6zm-1 2h1v3H5zm3 0h13v3H8zm-8 3h5v21H0zm6 0h2v21H6z"/></svg>'); */

  /* url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 34 55"><path fill="rgba(119,119,119,.04)" d="M0 0h8v13H0zm10 0h3v13h-3zM8 13h2v3H8zm5 0h21v3H13zM0 16h8v5H0zm10 0h3v5h-3zm-2 5h2v34H8zm5 0h21v34H13z"/></svg>'), */

  /* url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 34 55"><path fill="rgba(119,119,119,.04)" d="M8 0h2v13H8zm5 0h21v13H13zM0 13h8v3H0zm10 0h3v3h-3zm-2 3h2v5H8zm5 0h21v5H13zM0 21h8v34H0zm10 0h3v34h-3z"/></svg>'); */

  /* url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 55 89"><path fill="rgba(119,119,119,.04)" d="M0 0h13v25H0zm16 0h5v25h-5zm-3 25h3v5h-3zm8 0h34v5H21zM0 30h13v8H0zm16 0h5v8h-5zm-3 8h3v55h-3zm8 0h34v55H21z"/></svg>'); */

  /* url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 55 89"><path fill="rgba(119,119,119,.04)" d="M13 0h3v25h-3zm8 0h34v25H21zM0 25h13v5H0zm16 0h5v5h-5zm-3 5h3v8h-3zm8 0h34v8H21zM0 38h13v55H0zm16 0h5v55h-5z"/></svg>'); */
  --bg-pattern-size:
    /* 13rem 8rem, */
  /* 21rem 13rem, */
  /* 34rem 21rem; */
    26rem 16rem, 42rem 26rem;

  /* 34rem 21rem, */

  /* 13rem 21rem, */

  /* 21rem 34rem, */

  /* 34rem 55rem; */

  /* 55rem 34rem; */

  /* Animation Duration for Transitions */
  --transition: 0.2s ease-in-out;
}

/* Theme Variants - Only Base OKLCH Values Need Changes */

/*
 * Theme System Design
 * 
 * Only the base OKLCH values (surface, primary, accent) need to be defined
 * for each theme. All derived colors (containers, text, shadows, etc.) are
 * automatically recalculated using the same mathematical relationships.
 * 
 * This ensures:
 * - Consistent contrast ratios across themes
 * - Predictable color relationships
 * - Minimal maintenance when adding new themes
 */

/* Dark Mode - Automatic based on system preference */
@media (prefers-color-scheme: dark) {
  :root {
    /* Dark theme base colors - all others automatically calculated */

    /* --surface-l: 0.27;
    --surface-c: 0.02;
    --surface-h: 254;
    --primary-l: 0.68;
    --primary-c: 0.1;
    --primary-h: 254;
    --accent-l: 0.85;
    --accent-c: 0.15;
    --accent-h: 44; */

    /* Theme Colors */

    /* Theme Colors */
    --surface-l: 0.23;
    --surface-c: 0.012;
    --surface-h: 72;
    --primary-l: 0.5;
    --primary-c: 0.048;
    --primary-h: 240;
    --accent-l: 0.58;
    --accent-c: 0.12;
    --accent-h: 72;
  }

  .astro-code,
  .astro-code span {
    color: var(--shiki-dark) !important;
    background-color: var(--shiki-dark-bg) !important;
  }
}

@view-transition {
  navigation: auto;
}

/* Semantic Text Utilities (No TailwindCSS, DRY & Cascading) */

html,
body {
  margin: 0;
  padding: 0;
  min-height: 100vh;
  font-family: var(--font-sans);

  /* Responsive font size calculation:
   *
   * Formula: clamp(min, calc(min + (max - min) * ((100vw - min_width) / (max_width - min_width))), max)
   * Where:
   *   min = 16px (minimum font size)
   *   max = 22px (maximum font size)
   *   min_width = 400px (viewport width where scaling starts)
   *   max_width = 1920px (viewport width where scaling ends)
   *
   * Compact form derivation:
   *   multiplier = (max - min) / (max_width - min_width) = (22 - 16) / (1920 - 400) = 6 / 1520 ≈ 0.003947
   *   constant = min + multiplier * (-min_width) = 16 + 0.003947 * (-400) ≈ 16 - 1.579 ≈ 14.421
   *
   * This is equivalent to the following CSS:
   * font-size: clamp(16px, calc(16px + (22 - 16) * ((100vw - 400px) / (1920 - 400))), 22px);
   */
  font-size: clamp(16px, 0.395vw + 14.42px, 22px);
  line-height: 1.75;
  color: var(--color-on-surface);

  /*
   * Fibonacci Square Tiling Background Pattern
   * 
   * These layered patterns are inspired by Fibonacci square tilings, where
   * rectangles are divided into cells following Fibonacci sequence ratios.
   * Each pattern is a 4×4 checkerboard grid with asymmetric cell divisions.
   * 
   * Pattern Structure:
   * - Each SVG contains 8 rectangles (half of a 4×4 grid)
   * - Checkerboard alternation: filled cells (opacity 0.1) vs empty cells
   * - Cell divisions follow Fibonacci-inspired ratios for organic appearance
   * 
   * Four Progressive Scales (Fibonacci dimensions):
   * 1. 13×21 pattern: (3+1+1+8) × (5+1+2+13) - Finest texture
   * 2. 21×34 pattern: (5+1+2+13) × (8+2+3+21) - Fine texture
   * 3. 34×55 pattern: (8+2+3+21) × (13+3+5+34) - Medium texture
   * 4. 55×89 pattern: (13+3+5+34) × (25+5+8+55) - Coarse texture
   * 
   * The overlapping scales create a subtle, organic texture reminiscent of
   * paper grain or natural materials. Dimensions follow Fibonacci sequence:
   * 13, 21, 34, 55, 89 (each number is the sum of previous two).
   * 
   */
  background-image: var(--bg-pattern);
  background-size: var(--bg-pattern-size);
  background-repeat: repeat;
  background-color: var(--color-surface-container);
  transition:
    background-color var(--transition),
    color var(--transition);
}

/* Flexbox layout to push footer to bottom on short pages */
body {
  display: flex;
  flex-direction: column;
}

main {
  /* Grow to fill available vertical space, pushing footer to bottom */
  flex: 1;
  margin: 0 auto;
  padding: 0;
  width: 100%;
}

a {
  color: inherit;

  /*
   * Underline of the regular links reveals and lifts on hover.
   * Use line-height units for consistent vertical scaling.
   * Here we prepare the transparent underline for transition.
   * WebKit fix: Use separate text-decoration-color to ensure transparency works.
   */
  text-decoration: underline 0.1lh solid;
  text-decoration-color: transparent;
  text-underline-offset: 0.2lh;
  text-decoration-skip-ink: none;
}

a,
button,
figure {
  /*
   * Buttons and button-like elements use hover effect similar to links,
   * but with outline instead of underline, and it tightens instead of lifting.
   */
  outline: 0.1lh solid transparent;
  outline-offset: 0.2lh;

  /* Smooth transitions for links, buttons and button-like elements */
  transition:
    text-decoration-color var(--transition),
    text-underline-offset var(--transition),
    outline-color var(--transition),
    outline-offset var(--transition);
}

/* Unordered lists */

/* Square bullets are more cohesive with the overall design */
ul {
  list-style-type: square;
}

/* Horizontal container for icon + text */
button,
label {
  /* Flex layout for icon + text */
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5em;
}

/* Icon inside horizontal container */
button svg,
label svg {
  width: 1.5rem;
  height: 1.5rem;
  flex-shrink: 0;
  fill: currentcolor;
}

/* Contact Form Styles */

/* Common styles for input and textarea */
input,
textarea {
  outline: none;
  min-width: 10em;
}

/* Common styles for label and textarea */
label,
textarea {
  font-family: var(--font-serif);

  /* Surface container for input fields */
  background-color: var(--color-surface);
  color: var(--color-on-surface);

  /* Spacing and border */
  border: 0.1rem solid var(--color-surface-container-high);
  border-radius: 0.2rem;
  padding: 0.75rem 1rem;

  /* Smooth transitions for focus states */
  transition:
    border-color var(--transition),
    box-shadow var(--transition);
}

/* Input fields inside labels */
input {
  flex: 1;
  border: none;
  background: transparent;
  color: inherit;
}

/* Textarea - Message field */
textarea {
  min-height: 10rem;
  resize: vertical;
}

/* Icons in form labels */
label svg {
  color: var(--color-primary);
}

/* Headings: style h1-h4 directly, sans-serif, letter-spacing */
h1,
h2,
h3,
h4 {
  font-family: var(--font-sans);
  letter-spacing: -0.02em;
}

/* h1 styles */
h1 {
  font-size: 4rem;
  font-weight: 250;
  line-height: 1;
  margin-block: 0.3em;
}

/* h2 styles */
h2 {
  font-size: 2.7rem;
  line-height: 1.1;
  font-weight: 320;
  margin-block: 0.5em;
}

/* h3 styles */
h3 {
  font-size: 1.8rem;
  line-height: 1.2;
  font-weight: 370;
  margin-block: 0.7em;
}

/* h4 styles */
h4 {
  font-size: var(--font-size-h4);
  font-weight: var(--font-weight-h4);
  margin-block: 0.9em;
  line-height: 1.3;
}

article {
  /*
   * Paper-like article container with coordinated width and padding:
   * 
   * Design goal: Create a sheet of paper effect where the container grows
   * from 32rem to 42rem, while padding grows from minimal to generous.
   * 
   * Key insight: Content area is fixed at 30rem width on wide screens.
   * When viewport is narrower than 30rem + 2rem padding = 32rem total,
   * we're on a narrow screen and need different behavior.
   */
  max-width: clamp(32rem, 100%, 42rem);
  margin: 0 auto;

  /*
   * Responsive padding calculation:
   * 
   * (100% - 30rem) tells us how much extra space we have beyond the 30rem content width:
   * - Wide screens: Positive value = extra space available for generous padding
   * - Narrow screens: Negative value = constrained space, use minimal padding
   * 
   * Division by 2 distributes the extra space equally to left and right padding.
   * Result: Content stays 30rem wide on wide screens, adapts gracefully on narrow screens.
   */
  padding: 2.5rem clamp(1rem, (100% - 30rem) / 2, 6rem);
  color: inherit;
  background-color: var(--color-surface);
  box-shadow: var(--elevation-1);
}

#photo,
article {
  /* Use serif font for article body text for better readability */
  font-family: var(--font-serif);

  /* Give more flesh to Bitter Variable */
  font-weight: 450;
}

/* Accent links in articles with higher contrast */
article a {
  color: var(--color-on-surface-high);
  font-weight: 500;
}

article h1 a,
article h2 a,
article h3 a,
article h4 a {
  color: inherit;
  font-weight: inherit;
}

/* Calm down bold statements in articles */
article strong,
article b {
  color: var(--color-on-surface-variant);
  font-weight: 650;
}

/*
 * Heading Visual Hierarchy with Sheet Border Bars
 * 
 * Design goal: Create visual hierarchy bars that appear to extend from the
 * article's "paper borders" while keeping heading text aligned with body content.
 * 
 * Key insight: Same logic as article padding - (100% - 30rem) determines if we're
 * on wide screens (positive value) or narrow screens (negative value).
 */
article h1,
article h2,
article h3,
article h4 {
  border-left-color: var(--color-primary);
  border-left-width: 0.1em;

  /*
   * Responsive left padding:
   * - Uses (100% - 30rem) to detect screen width relative to content area
   * - Wide screens: Extra space allows generous bar extension
   * - Narrow screens: Minimal padding prevents overflow
   */
  padding: 0.2em 0 0.2em clamp(0.1em, 100% - 30rem + 0.2em, 0.2em);

  /*
   * Responsive left margin:
   * - Pulls bars leftward into the article's padding area
   * - Wide screens: Can pull further left due to generous padding
   * - Narrow screens: Limited leftward pull to prevent overflow
   */
  margin-left: clamp(-0.4em, 30rem - 100% - 0.4em, -0.2em);
}

/* Bar style represents different heading levels */
article h1,
article h2 {
  border-left-style: solid;
}

article h3 {
  border-left-style: dashed;
}

article h4 {
  border-left-style: dotted;
}

/* Metadata footer right after the article */
main > footer {
  color: var(--color-on-surface-variant);
  text-align: center;
  margin: 3rem auto;
  max-width: 42rem;
  padding: 0 1rem;
}

article img {
  max-width: 100%;
  height: auto;
  border-radius: 0.2rem;
  box-shadow: var(--elevation-1);

  /* Center images when narrower than article content */
  display: block;
  margin: 1rem auto;
}

/* Article figures - remove default margins for consistent spacing */
article figure {
  margin: 0;
}

/* Article figcaptions - subtle styling for image captions */
article figcaption {
  font-size: 0.9rem;
  line-height: 1.5;
  color: var(--color-on-surface-variant);
  font-family: var(--font-sans);
  font-style: italic;
}

/* Horizontal Rule - Material Design divider styling */
article hr {
  width: 70%;
  border-style: solid; /* Required for the WebKit browsers */
  border-width: 0 0.5rem 0.15rem 0;
  border-color: var(--color-primary);
  height: 0.55rem;
  background-color: inherit;
  margin-inline: auto -0.5rem;
  padding: 0;
}

/* Surface block containers */
pre,
blockquote,
fieldset {
  background-color: var(--color-surface-container-lowest);
  padding: 0.5rem 1rem;
  border-radius: 0.2rem;
}

/* Surface inline containers */
kbd,
code {
  background-color: var(--color-surface-container-low);
  padding: 0.125em 0.25em;
  border-radius: 0.25rem;
}

/* Blockquote shares some styles with h4 and uses surface container */
blockquote {
  font-size: var(--font-size-h4);
  font-weight: var(--font-weight-h4);
  color: var(--color-on-surface-variant);
  box-shadow: var(--elevation-1);
  position: relative;

  /* Blockquote uses the same typography as <h4>, so we need to add missing styles */
  font-family: var(--font-sans);
  margin-inline: 0;
}

blockquote::before {
  content: "\201C";
  position: absolute;
  top: -1rem;
  left: 1rem;
  font-size: 5rem;
  font-weight: 500;
  color: var(--color-primary);
  line-height: 1;
  text-shadow: var(--elevation-2);
}

/* Code Elements */
code,
pre,
kbd,
samp {
  font-family: var(--font-mono);
  letter-spacing: -0.02em;
}

pre {
  padding: 1rem;

  /* 
   * The article element has thick borders styled as a sheet of paper, implemented via variable padding.
   * This confines elements inside, limiting line length for pleasant reading, but makes code blocks narrow with scrolling.
   * To make code blocks wider, we increase their width by half the thick border width on each side.
   * Result: thick white borders around content, but thinner (half-width) around code blocks.
   *
   * margin-inline: clamp(-3rem, (100% - 100vw) / 4, -1rem);
   * - Max border width per side: 6rem, so limit negative margin to -3rem (half of max border).
   * - Min: -1rem for narrow screens, matching padding.
   * - Core formula: (100% - 100vw) / 4
   *   - 100%: width inside article (confined by padding).
   *   - 100vw: viewport width.
   *   - To flash to viewport edges: (100% - 100vw) / 2
   *   - But to split borders by half: divide by 4 instead of 2.
   */
  margin-inline: clamp(-3rem, (100% - 100vw) / 4, -1rem);
  border-radius: 0.2rem;
  overflow-x: auto;
  line-height: 1.4;
  box-shadow: var(--elevation-1);
  font-size: 0.9em;
  position: relative; /* Required for absolute positioning of copy button */
}

/* Reset styles for code blocks because they are styled with Shiki */
pre code {
  background: none;
  padding: 0;
  border-radius: 0;
  font-size: inherit;
}

kbd {
  border: 1px solid var(--color-surface-container-highest);
  box-shadow: var(--elevation-1);
  font-size: 0.9em;
}

/* List Elements - Subdued markers for better content hierarchy */
li::marker {
  color: var(--color-primary);
  font-family: var(--font-sans);
  font-weight: 550;
  font-size: 1.2em;
}

/* Table Elements - Material Design inspired styling */
table {
  width: 100%;
  border-collapse: collapse;
  margin: 1.5rem 0;
  background-color: var(--color-surface);
  color: var(--color-on-surface);
  border-radius: 0.2rem;
  box-shadow: var(--elevation-1);
}

thead {
  background-color: var(--color-surface-container-low);
}

th {
  font-family: var(--font-sans);
  font-weight: 500;
  font-size: 1.1em;
  text-align: left;
  padding: 0.5rem 1rem;
  border-bottom: 0.15rem solid var(--color-primary);
}

td {
  padding: 0.5rem 1rem;
  font-size: 0.9em;
  border-bottom: 0.07rem solid var(--color-surface-container);
}

/* Hover effect for rows */
tbody tr {
  transition: background-color var(--transition);
}

/* Alternating row colors for better readability */
tbody tr:nth-child(even) {
  background-color: var(--color-surface-container-lowest);
}

/* We don't use regular styles for hover/active states because table rows are not interactive by default */
tbody tr:hover {
  background-color: var(--color-surface-container-low);
}

tbody tr:active {
  background-color: var(--color-surface-container);
}

tbody tr:last-child td {
  border-bottom: none;
}

/* All navigation unordered lists are horizontal */
nav ul {
  list-style: none;
  display: flex;
  flex-wrap: wrap;
  gap: 1em;
  padding-inline: 0;
  justify-content: center;
  font-size: var(--font-size-h4);
  font-weight: var(--font-weight-h4);
}

/* Metadata definition list */
dl {
  display: grid;
  grid-template-columns: auto 1fr;
  gap: 0.5rem 1rem;
}

dt {
  text-align: right;
}

/* Pagination navigation - centered in main */
nav {
  text-align: center;
  max-width: 42rem;
  margin-inline: auto;
}

nav span[aria-current="page"] {
  color: var(--color-on-surface-low);
  cursor: not-allowed;
  text-decoration: underline;
}

/* Hierarchical date navigation with nested ordered lists */
nav ol {
  list-style: none;
  padding-inline: 0;
}

/* Date in article header */
time {
  font-style: italic;
}

article time {
  color: var(--color-on-surface-variant);
  font-size: 0.9em;
}

/*
 * Form Styling
 *
 * Design: Forms that appear as direct children of main are styled as
 * clean interactive cards with generous spacing and clear hierarchy.
 */
form {
  /* Centered with comfortable max-width */
  max-width: 32rem;
  margin: 0 auto;
  padding: var(--spacing-adaptive);
  background-color: var(--color-surface-container-low);
  box-shadow: var(--elevation-2);
  border-radius: 0.2rem;

  /* Vertical stack of form elements */
  display: flex;
  flex-direction: column;
  gap: 1rem;

  /* Use larger font size for inputs */
  font-size: 1.2rem;
}

mark {
  background-color: var(--color-accent-container);
  color: var(--color-on-accent-container);
}

/*
 * PhotoSwipe Caption Styling
 * 
 * Design goals:
 * - Lower luminosity to reduce distraction from photos
 * - Compact layout to prevent image shrinking
 * - Semantic HTML with minimal classes
 * - Align with site's typography system
 */

/* Caption container - semantic figcaption element */
.pswp__dynamic-caption h4,
.pswp__dynamic-caption p {
  margin: 0;

  /* Reduced brightness - less distracting on black background */
  color: oklch(75% 0 0deg);
}

/* Metadata paragraph - tags, time, and details link */
.pswp__dynamic-caption p {
  font-family: var(--font-serif);
}

/* Links in caption - subtle styling */
.pswp__dynamic-caption a {
  color: inherit;
}

/* Button-like elements and floating nav links */

/*
 * Semantic Button Styles
 * 
 * Buttons are styled based on their semantic type attribute:
 * - type="submit": Primary action (form submission) - primary color
 * - type="button": Secondary/neutral action - primary container color
 * - type="reset": Cautionary/destructive action - accent container color
 * - disabled: Unavailable action - low contrast surface color
 * 
 * All buttons share:
 * - Animated outline on hover (consistent across all interactive elements)
 * - Type-specific color schemes for normal and active states
 */

/* Base button structure - applies to all buttons */
button,
a[rel="prev"],
a[rel="next"] {
  font-size: var(--font-size-h4);
  font-weight: var(--font-weight-h4);
  color: var(--color-on-primary-container);
  background-color: var(--color-primary-container);
  border: 0.1lh solid var(--color-primary);
  cursor: pointer;
}

/* Default button style (neutral) - uses primary container with border */
button {
  border-radius: 0.2rem;
  padding: 0.5rem;
  box-shadow: var(--elevation-2);
}

/* Copy button styling */
pre button {
  position: absolute;
  top: 0.5rem;
  right: 0.5rem;
  border-radius: 50%;
}

/* Submit button (Primary action) - uses primary color for emphasis */
button[type="submit"] {
  color: var(--color-on-primary);
  background-color: var(--color-primary);
  border: none;
}

/* Reset button (Cautionary action) - uses accent container color */
button[type="reset"] {
  color: var(--color-on-accent-container);
  background-color: var(--color-accent-container);
  border: 0.1lh solid var(--color-accent);
}

/* Disabled button - low contrast, non-interactive */
button:disabled,
button[disabled] {
  color: var(--color-on-surface-low);
  background-color: var(--color-surface-container-low);
  border: 0.1lh solid var(--color-surface-container-highest);
  cursor: not-allowed;
  box-shadow: none;
}

/*
 * Floating Navigation Links - Semantic Pagination
 * 
 * Styles floating prev/next navigation buttons that use rel="prev" and rel="next"
 * attributes. Each link is independently positioned, so they appear correctly
 * even when only one is present (e.g., first or last page).
 * 
 * Design approach:
 * - Links are individually positioned (not container-based)
 * - Previous link always appears on the left
 * - Next link always appears on the right
 * - No awkward positioning when only one link is present
 */

a[rel="prev"],
a[rel="next"] {
  /* Floating button positioning */
  position: fixed;
  bottom: 1rem;
  z-index: 1;

  /* Button appearance */
  border-radius: 50%;
  box-shadow: var(--elevation-3);
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Position previous link on the left */
a[rel="prev"] {
  left: 1rem;
}

/* Position next link on the right */
a[rel="next"] {
  right: 1rem;
}

a[rel="prev"] svg,
a[rel="next"] svg {
  width: 2.2rem;
  height: 2.2rem;
}

/* Individual element styles */

/* Blog post index - vertical stack with ordered list */
#blog-posts {
  list-style: none;
  padding: var(--spacing-adaptive);
}

/* Blog post cards in vertical layout - text only, no images */
#blog-posts article {
  transition: box-shadow var(--transition);
}

#blog-posts article:hover {
  box-shadow: var(--elevation-3);
}

/* Logo size in the header */
#logo svg {
  /*
   * By default, SVGs can be treated as inline elements, which can cause
   * unexpected extra space below them due to baseline alignment. Setting
   * display to "block" removes this behavior and ensures the element's
   * bounds match its visual appearance, fixing vertical alignment issues
   * within flex containers.
   */
  display: block;
  height: 2.2rem;
  width: auto;

  /* USE border-radius: 50%; for round logo */
  border-radius: 0.2rem;
}

/* Navigation bar */
#navbar ul {
  justify-content: flex-end;
}

#navbar nav {
  margin: 0;
  display: flex;
  align-items: center;
  gap: 1rem;
}

#navbar,
#hero {
  color: var(--color-on-primary-container);
  box-shadow: var(--elevation-2);

  /* In combination with z-index, ensures the shadow appears above other content */
  position: relative;

  /* Flexbox layout with centered content */
  display: flex;
  align-items: center;
  text-align: center;

  /* Limit the content width inside the header to 42rem */
  padding-inline: max(1rem, (100% - 42rem) / 2);
}

/* Navbar styles */
#navbar {
  /* Fixed position at the top of the document */
  top: 0;

  /* Ensures the shadow appears above other content */
  z-index: 2;

  /* Spread out logo and nav items */
  justify-content: space-between;

  /* Gap between logo and nav */
  gap: 1rem;

  /* Use solid primary container compared to gradient in hero for performance */
  background-color: var(--color-primary-container);
}

/* Hero header */
#hero {
  /* Centered content with vertical stacking */
  flex-direction: column;
  justify-content: center;

  /* Generous vertical padding for spacious hero section */
  padding-block: 3rem;

  /* Ensure the shadow appears above other content */
  z-index: 1;

  /* Keep the original gradient background */
  background: var(--bg-primary-container);

  /* Required for pseudo-element positioning */
  position: relative;
}

/* Single photo page - Polaroid-style figure with #photo ID */
#photo {
  margin: 0;
  width: 100%;
}

/* Image sizing: fit within viewport while maintaining aspect ratio */
#photo img {
  display: block;
  margin: 0 auto;
  border-radius: 0.2rem;

  /* Inner border: thin light gray for separation from off-white border */
  padding: 0.1rem;
  background-color: oklch(92% 0 0deg);

  /* Outer border: percentage-based for easy sizes calculation (Polaroid aesthetic)
   * Horizontal borders: 5vw each side
   * Vertical borders: 5vh each side
   * This creates asymmetric but proportional borders that scale with viewport
   */
  border-width: 5vh 5vw;
  border-style: solid;
  border-color: oklch(95% 0 0deg);

  /* 
   * Maintain aspect ratio while constraining to viewport dimensions
   * 
   * The image has intrinsic dimensions from width/height attributes.
   * With width: auto and height: auto, it tries to render at intrinsic size,
   * but max-width and max-height constrain it to fit within the viewport.
   * 
   * Using 100% instead of 100vw avoids scrollbar width issues.
   * Border and padding are included in dimensions via box-sizing: border-box.
   * 
   * The browser automatically scales down maintaining aspect ratio when
   * either constraint is exceeded.
   */
  width: auto;
  height: auto;
  max-width: 100%;
  max-height: 100%;
  box-shadow: var(--elevation-3);
}

/* Figcaption contains title, description, and metadata */
#photo figcaption {
  max-width: 42rem;
  width: fit-content;
  margin: 0 auto;
  padding: 0 1rem;
  color: var(--color-on-surface-variant);
}

#photo a {
  color: var(--color-on-surface-high);
  font-weight: 500;
}

/* Photo gallery - CSS Grid masonry with known aspect ratios */
#gallery {
  list-style: none;
  display: grid;

  /* Responsive columns - adjust minmax for desired density */
  grid-template-columns: repeat(auto-fill, minmax(5rem, 1fr));
  gap: 1.5rem;
  padding: var(--spacing-adaptive);

  /* There is no horizontal limit, the masonry grid fills all available space */

  /* Center items vertically within their grid areas */
  align-items: center;
}

/* === Grid Layout Classes === */

/* These control how much space the card occupies on the grid */

/* Grid layout: Landscape cards - wider span */
#gallery .grid-landscape {
  grid-row: span 2;
  grid-column: span 3;
}

/* Grid layout: Square cards - balanced span */
#gallery .grid-square {
  grid-row: span 2;
  grid-column: span 2;
}

/* Grid layout: Portrait cards - taller span */
#gallery .grid-portrait {
  grid-row: span 3;
  grid-column: span 2;
}

/*
 * Polaroid-Style Photo Cards with Perceptual White Balance Strategy
 * 
 * Design Goal: Create photo cards that look like physical Polaroid prints with
 * white borders that serve both aesthetic and functional purposes.
 * 
 * WHY NOT USE GENERATED OKLCH COLORS HERE?
 * 
 * Unlike the rest of the site, these cards use fixed off-white colors (90-95%
 * lightness) that don't change with the theme. This intentional deviation from
 * the global color system serves multiple purposes:
 * 
 * 1. Polaroid Visual Aesthetic
 *    Physical Polaroid prints have white borders that don't change based on
 *    ambient lighting. This fixed white border creates an authentic tactile
 *    feeling and makes photos look like physical objects rather than digital
 *    elements that adapt to the theme.
 * 
 * 2. White Balance Reference Point
 *    The fixed off-white border provides a consistent white balance reference
 *    for the viewer's eye. When viewing photos:
 *    
 *    a) Under non-ideal ambient lighting (warm/cool room lighting):
 *       - Both the photo and border will be affected by the same color cast
 *       - The human visual system will use the "white" border as a reference
 *       - This recalibrates perception, making the photo colors appear more accurate
 *    
 *    b) On displays with incorrect white balance:
 *       - The entire image + border shifts together
 *       - The viewer's eye adapts using the border as the "white" anchor
 *       - This compensates for display calibration issues
 * 
 * 3. Perceptual Contrast Boost
 *    The border uses 90-95% white instead of pure 100% white. Combined with
 *    the deliberately darker, desaturated background (see data-page-type
 *    overrides above), this creates a perceptual contrast enhancement:
 *    
 *    - The viewer's eye perceives the border as "pure white" in context
 *    - Any 100% white elements in the photo itself appear even brighter
 *    - This increases the perceived dynamic range of the photos
 *    - Black elements appear deeper against the bright border
 * 
 * 4. Coordination with Page Background
 *    Pages with data-page-type="photo-gallery" have:
 *    - Darker background (surface-l: 0.85 in light mode)
 *    - Zero chroma (surface-c: 0) to avoid color cast interference
 *    
 *    This creates a viewing environment similar to a photo mat or gallery wall
 *    where the darker surround makes the bright photo borders "pop" visually.
 * 
 * Technical Implementation:
 * - Light theme: 95% lightness border
 * - Dark theme: 90% lightness border (maintains contrast difference)
 * - Zero chroma (0) ensures pure neutral gray-white
 * - Zero hue (0deg) becomes irrelevant with zero chroma
 * 
 * Note: These design principles may be expanded into a blog post about the
 * site's visual design system.
 */

/* Figure container fills anchor and positions caption relative to image */
#gallery figure {
  margin: 0;

  /* Polaroid-style card: white background with shadow and rounded corners */
  border-radius: 0.2rem;
  box-shadow: var(--elevation-2);

  /* Fixed off-white background - NOT theme-adaptive (see explanation above) */
  background-color: oklch(95% 0 0deg);

  /* Base padding around image (will be overridden for caption sides) */
  padding: 0.5rem;

  /* Prepare outline for focus-visible state (applied to figure because it sits on top of the link) */

  /* outline: 0.1lh solid transparent;
  outline-offset: 0.2lh; */

  /* Smooth transitions for hover effects */
  transition:
    box-shadow var(--transition),
    scale var(--transition),
    rotate var(--transition),
    outline-color var(--transition),
    outline-offset var(--transition);
}

/* === Caption Placement Classes === */

/* These control padding to accommodate captions at different positions */

/* Caption placement: Bottom (for landscape and square-ish photos) */
#gallery .caption-bottom figure {
  padding-bottom: 2rem;
}

/* Caption placement: Side (for portrait photos) */
#gallery .caption-side figure {
  padding-left: 2rem;
}

/* Image fills available space with no extra styling */
#gallery img {
  display: block;
  width: 100%;
  height: 100%;
  object-fit: contain;
  border-radius: 0.2rem;

  /* Border around image to separate from white border */
  border: 0.1rem solid oklch(92% 0 0deg);
}

/*
 * Photo Caption Styling - Fixed Dark Gray on White
 * 
 * Like the border background, the caption color is intentionally NOT derived
 * from the global OKLCH color system. This fixed dark gray (45% lightness)
 * maintains the Polaroid aesthetic where captions are handwritten or printed
 * in dark ink on the white border.
 * 
 * Design rationale:
 * - Provides strong, consistent contrast against the 90-95% white border
 * - Doesn't change with theme, maintaining the "physical object" illusion
 * - Zero chroma keeps it neutral to avoid competing with photo colors
 * - 45% lightness is dark enough to be easily readable but not harsh
 */

/* Caption base styles - always visible, single line with ellipsis */
#gallery figcaption {
  position: absolute;
  font-size: 0.85rem;
  font-family: var(--font-mono);
  letter-spacing: -0.02em;
  font-weight: 550;
  white-space: nowrap;
  text-overflow: ellipsis;
  line-height: 1.2;

  /* Fixed dark gray - NOT theme-adaptive (see explanation above) */
  color: oklch(45% 0 0deg);
}

/* === Caption Positioning Classes === */

/* These control where the caption appears within the figure */

/* Caption positioning: Bottom */
#gallery .caption-bottom figcaption {
  /* Figure padding 0.5rem + image border 0.1rem = 0.6rem offset */
  bottom: 0.5rem;
  left: 0.6rem;
  right: 0.6rem; /* This constrains the width for ellipsis to work */

  /* Trim text that overflows horizontally, but allow vertical overflow */
  overflow-x: clip;
}

/* Caption positioning: Side (rotated 90 degrees) */
#gallery .caption-side figcaption {
  /* Figure padding 0.5rem + image border 0.1rem = 0.6rem offset */
  top: 0.6rem;
  left: 0.5rem;
  bottom: 0.6rem; /* This constrains the height (becomes width in vertical mode) */

  /* Trim text that overflows vertically, but allow horizontal overflow */
  overflow-y: clip;

  /* Rotate text 90 degrees: vertical-rl makes text flow from top to bottom */
  writing-mode: vertical-rl;
}

/* Hover effect: scale entire figure (image + caption together) and increase shadow */
#gallery figure:hover,
#gallery a:focus-visible figure {
  scale: 1.02;
  rotate: 0deg !important; /* Straighten the card on hover - important needed to override inline styles */
  box-shadow: var(--elevation-3);
}

/* Page footer styles */

#footer {
  /* Theme-aware muted background */
  background-color: var(--color-surface-container-highest);
  color: var(--color-on-surface-variant);

  /* Inner shadow on top using Material Design elevation */
  box-shadow: inset 0 4px 6px -2px
    hsl(0deg 0% var(--shadow-lightness) / var(--shadow-alpha-2));

  /* Layout - flex with wrapping to allow nav elements to sit side-by-side */
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 2rem;
  padding: 3rem var(--spacing-adaptive);
  margin-top: 3rem;

  /* Limit the content width inside the header to 42rem */
  padding-inline: max(1rem, (100% - 42rem) / 2);

  /*
   * Fibonacci Pattern Background for Footer
   * 
   * The footer is an ideal candidate for the full-opacity pattern because:
   * - It's visually separated from other content
   * - No gradient blending needed with adjacent elements
   * - The muted background color works well with the subtle texture
   * 
   * Unlike the hero section, we apply the pattern at full opacity without
   * any gradient mask, creating consistent texture across the entire footer.
   */
  background-image: var(--bg-pattern);
  background-size: var(--bg-pattern-size);
  background-repeat: repeat;
}

#footer h2 {
  font-size: var(--font-size-h4);
  font-weight: var(--font-weight-h4);
}

/* Footer logo and paragraphs span full width */
#footer svg,
#footer p {
  flex-basis: 100%;
}

/* Logo styling - centered at top of footer */
#footer svg {
  margin: 0 auto;
  height: 2.2rem;
  width: auto;
}

/* Footer paragraphs - centered text, full width */
#footer p {
  text-align: center;
}

/* Navigation blocks - horizontal layout with wrapping */
#footer nav {
  /* Each nav is a vertical stack */
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;

  /* Allow navs to grow and shrink, with minimum width */
  flex: 1 1 8rem;
  min-width: 8rem;
}

/* Navigation lists - vertical stack */
#footer ul {
  flex-direction: column;
  gap: 0;

  /* Reset font size and weight for footer nav links, since by default they are h4-styled */
  font-size: 1rem;
  font-weight: 400;
}

/* Hover and active states */

/* Use animated underline for links for less-distracting effect */
a:hover {
  text-decoration-color: var(--color-accent);
  text-underline-offset: 0.1lh;
}

/* Draw outline on focus and hover */
button:not(:disabled):hover,
a[rel="prev"]:hover,
a[rel="next"]:hover,
/* Use the same focus-visible style for keyboard navigation */
a:focus-visible,
button:not(:disabled):focus-visible,
#gallery a:focus-visible figure {
  outline-color: var(--color-accent);
  outline-offset: 0.1lh;
}

/* Since we draw outline on focus, don't need default focus ring */

/* Paint active state with type-specific colors */

/* Submit and reset buttons active state - switches to accent color */
a:active,
button[type="submit"]:active,
button[type="reset"]:active {
  color: var(--color-on-accent);
  background-color: var(--color-accent);
}

/* Default button active state - switches to accent container */
a[rel="prev"]:active,
a[rel="next"]:active,
button:not([type]):active,
button:not(:disabled)[type="button"]:active {
  background-color: var(--color-accent-container);
  color: var(--color-on-accent-container);
  border-color: var(--color-accent);
}

::selection {
  background-color: var(--color-accent);
  color: var(--color-on-accent);
}

/* Form input placeholder text */
input::placeholder,
textarea::placeholder {
  color: var(--color-on-surface-low);
}

/* Focus state for labels when input is focused */
label:focus-within,
textarea:focus {
  border-color: var(--color-accent);
  box-shadow: 0 0 0 0.2rem var(--color-accent-container);
}

/* Invalid state - show error indicator only after user interaction */
label:has(input:user-invalid),
textarea:user-invalid {
  background-color: var(--color-accent-container);
  color: var(--color-on-accent-container);
}

/* Remove our custom outline for PhotoSwipe buttons */
.pswp button:hover {
  outline-color: transparent;
}

.pswp__dynamic-caption a:active {
  color: var(--color-on-accent);
}

/* Subtitle styles in hero header - placed after all similar specificity selectors */
#hero p {
  font-size: 1.8rem;
  line-height: 1.2;
  font-weight: 370;
  margin-block: 0.7em;
  font-family: var(--font-serif);
  font-style: italic;
}

/* Photo Gallery Color Theme Overrides */

/*
 * Neutral Gray Color Scheme for Photo Gallery Pages
 * 
 * Photo galleries require a neutral, desaturated background to avoid
 * affecting the perceived white balance of displayed photos. Any color
 * cast in the background can make photos appear warmer or cooler than
 * they actually are.
 * 
 * This uses the same pattern as the theme switcher - an attribute on <html>
 * that overrides the :root variables with higher specificity.
 * 
 * Changes from default theme:
 * - Light theme: Darker background with reduced contrast
 * - Both themes: Zero chroma (surface-c = 0) for completely neutral grays
 * - All surface colors become pure grayscale with no hue bias
 */

/* Photo Gallery Light Theme Override */
[data-page-type="photo"],
[data-page-type="photo-gallery"] {
  /* Darker background: lightness ~0.85 for softer appearance */
  --surface-l: 0.85;

  /* Zero chroma: complete desaturation for neutral gray */
  --surface-c: 0;
  --primary-c: 0;

  /* Reduce accent chroma */
  --accent-c: 0.12;
}

@media (prefers-color-scheme: dark) {
  #gallery figure {
    /* Slightly darker off-white for dark theme - still provides white balance reference */
    background-color: oklch(90% 0 0deg);
  }

  #gallery img {
    /* Darken border slightly in dark mode for better contrast */
    border-color: oklch(87% 0 0deg);
  }

  #photo img {
    /* Darken inner border for better contrast in dark theme */
    background-color: oklch(87% 0 0deg);

    /* Slightly darker off-white outer border for dark theme */
    border-color: oklch(90% 0 0deg);
  }

  /* Photo Gallery Dark Theme Override */
  [data-page-type="photo"],
  [data-page-type="photo-gallery"] {
    /* Keep dark theme darkness */
    --surface-l: 0.23;

    /* Reduce accent color even more */
    --accent-c: 0.08;
  }
}

@media (prefers-reduced-motion: reduce) {
  a,
  a[rel="prev"],
  a[rel="next"],
  button,
  body,
  html,
  main,
  label,
  textarea,
  input,
  td,
  #navbar svg,
  #blog-posts article,
  #gallery figure {
    transition: none;
  }

  @view-transition {
    navigation: none;
  }
}

/* Since auto-translation feature is quite common now, include font faces for common languages */

/* source-sans-3-latin-wght-normal */
@font-face {
  font-family: "Source Sans 3 Variable";
  font-style: normal;
  font-display: block;
  font-weight: 200 900;
  src: url("@fontsource-variable/source-sans-3/files/source-sans-3-latin-wght-normal.woff2")
    format("woff2-variations");
  unicode-range:
    U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC,
    U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193, U+2212,
    U+2215, U+FEFF, U+FFFD;
}

/* source-sans-3-cyrillic-wght-normal */
@font-face {
  font-family: "Source Sans 3 Variable";
  font-style: normal;
  font-display: block;
  font-weight: 200 900;
  src: url("@fontsource-variable/source-sans-3/files/source-sans-3-cyrillic-wght-normal.woff2")
    format("woff2-variations");
  unicode-range: U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}

/* source-sans-3-greek-wght-normal */
@font-face {
  font-family: "Source Sans 3 Variable";
  font-style: normal;
  font-display: block;
  font-weight: 200 900;
  src: url("@fontsource-variable/source-sans-3/files/source-sans-3-greek-wght-normal.woff2")
    format("woff2-variations");
  unicode-range:
    U+0370-0377, U+037A-037F, U+0384-038A, U+038C, U+038E-03A1, U+03A3-03FF;
}

/* source-sans-3-vietnamese-wght-normal */
@font-face {
  font-family: "Source Sans 3 Variable";
  font-style: normal;
  font-display: block;
  font-weight: 200 900;
  src: url("@fontsource-variable/source-sans-3/files/source-sans-3-vietnamese-wght-normal.woff2")
    format("woff2-variations");
  unicode-range:
    U+0102-0103, U+0110-0111, U+0128-0129, U+0168-0169, U+01A0-01A1,
    U+01AF-01B0, U+0300-0301, U+0303-0304, U+0308-0309, U+0323, U+0329,
    U+1EA0-1EF9, U+20AB;
}

/* source-sans-3-latin-wght-italic */
@font-face {
  font-family: "Source Sans 3 Variable";
  font-style: italic;
  font-display: block;
  font-weight: 200 900;
  src: url("@fontsource-variable/source-sans-3/files/source-sans-3-latin-wght-italic.woff2")
    format("woff2-variations");
  unicode-range:
    U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC,
    U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193, U+2212,
    U+2215, U+FEFF, U+FFFD;
}

/* source-sans-3-cyrillic-wght-italic */
@font-face {
  font-family: "Source Sans 3 Variable";
  font-style: italic;
  font-display: block;
  font-weight: 200 900;
  src: url("@fontsource-variable/source-sans-3/files/source-sans-3-cyrillic-wght-italic.woff2")
    format("woff2-variations");
  unicode-range: U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}

/* source-sans-3-greek-wght-italic */
@font-face {
  font-family: "Source Sans 3 Variable";
  font-style: italic;
  font-display: block;
  font-weight: 200 900;
  src: url("@fontsource-variable/source-sans-3/files/source-sans-3-greek-wght-italic.woff2")
    format("woff2-variations");
  unicode-range:
    U+0370-0377, U+037A-037F, U+0384-038A, U+038C, U+038E-03A1, U+03A3-03FF;
}

/* source-sans-3-vietnamese-wght-italic */
@font-face {
  font-family: "Source Sans 3 Variable";
  font-style: italic;
  font-display: block;
  font-weight: 200 900;
  src: url("@fontsource-variable/source-sans-3/files/source-sans-3-vietnamese-wght-italic.woff2")
    format("woff2-variations");
  unicode-range:
    U+0102-0103, U+0110-0111, U+0128-0129, U+0168-0169, U+01A0-01A1,
    U+01AF-01B0, U+0300-0301, U+0303-0304, U+0308-0309, U+0323, U+0329,
    U+1EA0-1EF9, U+20AB;
}

/* bitter-latin-wght-normal */
@font-face {
  font-family: "Bitter Variable";
  font-style: normal;
  font-display: block;
  font-weight: 100 900;
  src: url("@fontsource-variable/bitter/files/bitter-latin-wght-normal.woff2")
    format("woff2-variations");
  unicode-range:
    U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC,
    U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193, U+2212,
    U+2215, U+FEFF, U+FFFD;
}

/* bitter-cyrillic-wght-normal */
@font-face {
  font-family: "Bitter Variable";
  font-style: normal;
  font-display: block;
  font-weight: 100 900;
  src: url("@fontsource-variable/bitter/files/bitter-cyrillic-wght-normal.woff2")
    format("woff2-variations");
  unicode-range: U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}

/* bitter-vietnamese-wght-normal */
@font-face {
  font-family: "Bitter Variable";
  font-style: normal;
  font-display: block;
  font-weight: 100 900;
  src: url("@fontsource-variable/bitter/files/bitter-vietnamese-wght-normal.woff2")
    format("woff2-variations");
  unicode-range:
    U+0102-0103, U+0110-0111, U+0128-0129, U+0168-0169, U+01A0-01A1,
    U+01AF-01B0, U+0300-0301, U+0303-0304, U+0308-0309, U+0323, U+0329,
    U+1EA0-1EF9, U+20AB;
}

/* bitter-latin-wght-italic */
@font-face {
  font-family: "Bitter Variable";
  font-style: italic;
  font-display: block;
  font-weight: 100 900;
  src: url("@fontsource-variable/bitter/files/bitter-latin-wght-italic.woff2")
    format("woff2-variations");
  unicode-range:
    U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC,
    U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193, U+2212,
    U+2215, U+FEFF, U+FFFD;
}

/* bitter-cyrillic-wght-italic */
@font-face {
  font-family: "Bitter Variable";
  font-style: italic;
  font-display: block;
  font-weight: 100 900;
  src: url("@fontsource-variable/bitter/files/bitter-cyrillic-wght-italic.woff2")
    format("woff2-variations");
  unicode-range: U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}

/* bitter-vietnamese-wght-italic */
@font-face {
  font-family: "Bitter Variable";
  font-style: italic;
  font-display: block;
  font-weight: 100 900;
  src: url("@fontsource-variable/bitter/files/bitter-vietnamese-wght-italic.woff2")
    format("woff2-variations");
  unicode-range:
    U+0102-0103, U+0110-0111, U+0128-0129, U+0168-0169, U+01A0-01A1,
    U+01AF-01B0, U+0300-0301, U+0303-0304, U+0308-0309, U+0323, U+0329,
    U+1EA0-1EF9, U+20AB;
}

/* source-code-pro-latin-wght-normal */
@font-face {
  font-family: "Source Code Pro Variable";
  font-style: normal;
  font-display: block;
  font-weight: 200 900;
  src: url("@fontsource-variable/source-code-pro/files/source-code-pro-latin-wght-normal.woff2")
    format("woff2-variations");
  unicode-range:
    U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC,
    U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193, U+2212,
    U+2215, U+FEFF, U+FFFD;
}

/* source-code-pro-cyrillic-wght-normal */
@font-face {
  font-family: "Source Code Pro Variable";
  font-style: normal;
  font-display: block;
  font-weight: 200 900;
  src: url("@fontsource-variable/source-code-pro/files/source-code-pro-cyrillic-wght-normal.woff2")
    format("woff2-variations");
  unicode-range: U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}

/* source-code-pro-greek-wght-normal */
@font-face {
  font-family: "Source Code Pro Variable";
  font-style: normal;
  font-display: block;
  font-weight: 200 900;
  src: url("@fontsource-variable/source-code-pro/files/source-code-pro-greek-wght-normal.woff2")
    format("woff2-variations");
  unicode-range:
    U+0370-0377, U+037A-037F, U+0384-038A, U+038C, U+038E-03A1, U+03A3-03FF;
}

/* source-code-pro-vietnamese-wght-normal */
@font-face {
  font-family: "Source Code Pro Variable";
  font-style: normal;
  font-display: block;
  font-weight: 200 900;
  src: url("@fontsource-variable/source-code-pro/files/source-code-pro-vietnamese-wght-normal.woff2")
    format("woff2-variations");
  unicode-range:
    U+0102-0103, U+0110-0111, U+0128-0129, U+0168-0169, U+01A0-01A1,
    U+01AF-01B0, U+0300-0301, U+0303-0304, U+0308-0309, U+0323, U+0329,
    U+1EA0-1EF9, U+20AB;
}

/*
 * Dialog Elements
 * 
 * Semantic HTML dialog element for modal overlays.
 * Follows design system with surface colors and elevation.
 */
dialog {
  max-width: 50rem;
  width: 90vw;
  max-height: 80vh;
  border: 0.1lh solid var(--color-on-surface-low);
  border-radius: 0.2rem;
  padding: 1rem;
}

dialog::backdrop {
  background: var(--color-surface-container-highest);
}

/* Dialog header with title and close button */
dialog header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  /* margin: 0 0 1rem; */
  /* padding-bottom: 1rem; */
  /* border-bottom: 0.1lh solid var(--color-surface-container-highest); */
}

dialog header button {
  /* padding: 0.5rem; */
  /* box-shadow: none; */
}

/*
 * Search Dialog Styles
 *
 * Custom search UI styling using semantic HTML selectors.
 * Pagefind JS is loaded dynamically when dialog opens.
 */
#search-dialog {
  /* display: flex; */
  /* flex-direction: column; */
  /* gap: 1rem; */
  /* max-width: min(40rem, 90vw); */
  /* max-height: 80vh; */
  /* width: 100%; */
}

#search-dialog header {
  /* display: flex; */
  /* justify-content: space-between; */
  /* align-items: center; */
}

#search-dialog header h2 {
  margin: 0;
}

#search-dialog #close-search {
  /* background: transparent; */
  /* border: none; */
  /* cursor: pointer; */
  /* padding: 0.5rem; */
  /* color: var(--color-on-surface-variant); */
  /* transition: color 0.2s ease; */
}

#search-dialog #close-search:hover {
  /* color: var(--color-on-surface); */
}

#search-dialog #close-search svg {
  /* width: 1.5rem; */
  /* height: 1.5rem; */
}

/* Search form */
#search-form {
  /* margin: 0; */
}

#search-input {
  /* width: 100%; */
  /* padding: 0.75rem 1rem; */
  /* font-size: 1rem; */
  /* font-family: var(--font-sans); */
  /* background: var(--color-surface-container-low); */
  /* border: 0.1lh solid var(--color-on-surface-low); */
  /* border-radius: 0.25rem; */
  /* color: var(--color-on-surface); */
}

#search-input::placeholder {
  color: var(--color-on-surface-low);
}

#search-input:focus {
  /* outline: 2px solid var(--color-accent); */
  /* outline-offset: 2px; */
}

/* Search results container */
#search-results {
  overflow-y: auto;
  flex: 1;
  min-height: 0;
}

#search-status {
  color: var(--color-on-surface-variant);
  font-size: 0.875rem;
  margin: 0 0 0.5rem;
}

/* Results list */
#search-results-list {
  list-style: none;
  padding: 0;
  margin: 0;
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

#search-results-list > li {
  padding-bottom: 1rem;
  border-bottom: 0.1lh solid var(--color-on-surface-low);
}

#search-results-list > li:last-child {
  border-bottom: none;
}

#search-results-list > li > a {
  color: var(--color-accent);
  text-decoration: none;
  font-size: 1.1rem;
}

#search-results-list > li > a:hover {
  text-decoration: underline;
}

#search-results-list > li > p {
  color: var(--color-on-surface-variant);
  font-size: 0.875rem;
  margin: 0.25rem 0 0;
  line-height: 1.5;
}

/* Highlighted search terms */
#search-results-list mark {
  background: oklch(from var(--color-accent) l c h / 0.25);
  color: inherit;
  padding: 0.1em 0.2em;
  border-radius: 0.15em;
}

/* Sub-results (headings within page) */
#search-results-list > li > ul {
  list-style: none;
  padding: 0.5rem 0 0 1rem;
  margin: 0;
  border-left: 2px solid var(--color-on-surface-low);
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

#search-results-list > li > ul li a {
  color: var(--color-accent);
  text-decoration: none;
  font-size: 0.95rem;
}

#search-results-list > li > ul li a:hover {
  text-decoration: underline;
}

#search-results-list > li > ul li p {
  color: var(--color-on-surface-low);
  font-size: 0.8rem;
  margin: 0.125rem 0 0;
}
